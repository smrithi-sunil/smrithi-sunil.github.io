---
title: India population trends
description: Population statistics across states over time
author: Smrithi Sunil
date: 04-22-2024
categories: [India In Data]
image: IID_population.png
execute:
  echo: false
draft: false
---

```{python}
import pandas as pd
import geopandas as gpd
import plotly.express as px
# Load the CSV with GeoJSON geometries
gdf = gpd.read_file('geoJSON_cut.geojson')  # Adjust filename as necessary
# Load the CSV with population data
pop_data = pd.read_csv('population_data.csv')  # Adjust filename as necessary
# Merge the data on the common identifier (e.g., 'state_code' or 'state_name')
merged_data = pd.merge(gdf,pop_data, on='NAME_1')
merged_data.rename(columns={'NAME_1': 'State', 'Persons': 'Population'}, inplace=True)
```

Population of India.

```{python}
# Plot the choropleth map for total population
fig = px.choropleth(merged_data,
                    geojson=merged_data.geometry,
                    locations=merged_data.index,  # Use the DataFrame index as locations
                    projection="natural earth",
                    fitbounds="locations",
                    #basemap_visible=False,
                    color="Population",  # Column containing the values to color
                    color_continuous_scale='Greens',
                    range_color=(0, 70000000),
                    animation_frame="Year",  # Column that changes over time
                    title="Population Over Time by State")
# Show the plot
#fig.update_geos(fitbounds="locations", visible=False)
fig.show(config={'staticPlot': True})

# Plot line plot for all states
df = merged_data
fig = px.line(df, x="Year", y="Population", color='State', markers=False)
fig.show()
```
Female to Male Ratio.

```{python}
# Plot the choropleth map for female:male ratio
fig = px.choropleth(merged_data,
                    geojson=merged_data.geometry,
                    locations=merged_data.index,  # Use the DataFrame index as locations
                    projection="natural earth",
                    hover_name=merged_data.State,
                    fitbounds="locations",
                    #basemap_visible=False,
                    color="Female_Male_Ratio",  # Column containing the values to color
                    color_continuous_scale='Balance',
                    range_color=(0.9, 1.1),
                    animation_frame="Year",  # Column that changes over time
                    title="Female to Male Ratio Over Time")
# Show the plot
#fig.update_geos(fitbounds="locations", visible=False)
fig.update_layout(
    coloraxis_colorbar=dict(
        title='Female to Male Ratio',
        titleside='right',  # Position of the title ('top', 'right', 'bottom', 'left')
        ticks='outside'   # Where to position the ticks ('outside', 'inside')
    )
)
fig.show(config={'staticPlot': True})

# Plot line plot for all states
df = merged_data
fig = px.line(df, x="Year", y="Female_Male_Ratio", color='State', markers=False, range_y=[0.7, 1.3])
fig.update_layout(
    yaxis=dict(title="Female to Male Ratio")   # Turns off grid lines for y-axis
)
fig.show()
```
